// Code generated by gen-api. DO NOT EDIT.

package pve

import (
	"context"
)

type ClusterBackupCreateJobRequest struct {
	All              *bool   `json:"all,omitempty"`              // Backup all known guest systems on this host.
	Bwlimit          *int64  `json:"bwlimit,omitempty"`          // Limit I/O bandwidth (KBytes per second).
	Comment          *string `json:"comment,omitempty"`          // Description for the Job.
	Compress         *string `json:"compress,omitempty"`         // Compress dump file.
	Dow              *string `json:"dow,omitempty"`              // Day of week selection.
	Dumpdir          *string `json:"dumpdir,omitempty"`          // Store resulting files to specified directory.
	Enabled          *bool   `json:"enabled,omitempty"`          // Enable or disable the job.
	Exclude          *string `json:"exclude,omitempty"`          // Exclude specified guest systems (assumes --all)
	ExcludePath      *string `json:"exclude-path,omitempty"`     // Exclude certain files/directories (shell globs). Paths starting with '/' are anchored to the container's root,  other paths match relative to each subdirectory.
	Id               *string `json:"id,omitempty"`               // Job ID (will be autogenerated).
	Ionice           *int64  `json:"ionice,omitempty"`           // Set CFQ ionice priority.
	Lockwait         *int64  `json:"lockwait,omitempty"`         // Maximal time to wait for the global lock (minutes).
	Mailnotification *string `json:"mailnotification,omitempty"` // Specify when to send an email
	Mailto           *string `json:"mailto,omitempty"`           // Comma-separated list of email addresses or users that should receive email notifications.
	Maxfiles         *int64  `json:"maxfiles,omitempty"`         // Deprecated: use 'prune-backups' instead. Maximal number of backup files per guest system.
	Mode             *string `json:"mode,omitempty"`             // Backup mode.
	Node             *string `json:"node,omitempty"`             // Only run if executed on this node.
	NotesTemplate    *string `json:"notes-template,omitempty"`   // Template string for generating notes for the backup(s). It can contain variables which will be replaced by their values. Currently supported are {{cluster}}, {{guestname}}, {{node}}, and {{vmid}}, but more might be added in the future. Needs to be a single line, newline and backslash need to be escaped as '\n' and '\\' respectively.
	Performance      *string `json:"performance,omitempty"`      // Other performance-related settings.
	Pigz             *int64  `json:"pigz,omitempty"`             // Use pigz instead of gzip when N>0. N=1 uses half of cores, N>1 uses N as thread count.
	Pool             *string `json:"pool,omitempty"`             // Backup all known guest systems included in the specified pool.
	Protected        *bool   `json:"protected,omitempty"`        // If true, mark backup(s) as protected.
	PruneBackups     *string `json:"prune-backups,omitempty"`    // Use these retention options instead of those from the storage configuration.
	Quiet            *bool   `json:"quiet,omitempty"`            // Be quiet.
	Remove           *bool   `json:"remove,omitempty"`           // Prune older backups according to 'prune-backups'.
	RepeatMissed     *bool   `json:"repeat-missed,omitempty"`    // If true, the job will be run as soon as possible if it was missed while the scheduler was not running.
	Schedule         *string `json:"schedule,omitempty"`         // Backup schedule. The format is a subset of `systemd` calendar events.
	Script           *string `json:"script,omitempty"`           // Use specified hook script.
	Starttime        *string `json:"starttime,omitempty"`        // Job Start time.
	Stdexcludes      *bool   `json:"stdexcludes,omitempty"`      // Exclude temporary files and logs.
	Stop             *bool   `json:"stop,omitempty"`             // Stop running backup jobs on this host.
	Stopwait         *int64  `json:"stopwait,omitempty"`         // Maximal time to wait until a guest system is stopped (minutes).
	Storage          *string `json:"storage,omitempty"`          // Store resulting file to this storage.
	Tmpdir           *string `json:"tmpdir,omitempty"`           // Store temporary files to specified directory.
	Vmid             *string `json:"vmid,omitempty"`             // The ID of the guest system you want to backup.
	Zstd             *int64  `json:"zstd,omitempty"`             // Zstd threads. N=0 uses half of the available cores, N>0 uses N as thread count.
}

type ClusterBackupCreateJobResponse struct{}

// Create new vzdump backup job.
// https://pve.proxmox.com/pve-docs/api-viewer/#/cluster/backup
func (c *Client) ClusterBackupCreateJob(ctx context.Context, request *ClusterBackupCreateJobRequest) (*ClusterBackupCreateJobResponse, error) {

	method := "POST"
	path := "/cluster/backup"

	var response ClusterBackupCreateJobResponse

	err := c.apiCall(ctx, method, path, request, &response)
	if err != nil {
		return nil, err
	}

	return &response, nil
}
